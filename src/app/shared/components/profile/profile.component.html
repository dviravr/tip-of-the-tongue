<ion-header mode="ios">
  <ion-toolbar>
    <div class="text-center">
      <ion-title>
        הפרופיל שלי
      </ion-title>
    </div>
    <ion-icon style="font-size: xx-large" name="close" (click)="modalController.dismiss()"></ion-icon>
  </ion-toolbar>
</ion-header>

<ion-content>
  <ion-grid>
    <ion-row class="ion-justify-content-center">
      <ion-col size="11" size-md="7" size-lg="6" size-xl="4">
        <ion-spinner *ngIf="isLoading"></ion-spinner>
        <div class="profile-image" *ngIf="!isLoading">
          <div class="d-flex justify-content-center">
            <img src="{{profilePicture}}" class="w-75" *ngIf="!isLoadingPicture" alt="אין תמונת פרופיל">
          </div>
          <ion-spinner style="position:inherit; transform: scale(1.5)" *ngIf="isLoadingPicture"></ion-spinner>
          <div class="d-flex flex-row">
            <ion-fab-button class="icon-container" (click)="getPicture(cameraSource.Camera)">
              <ion-icon name="camera-outline"></ion-icon>
            </ion-fab-button>
            <ion-fab-button class="icon-container" (click)="getPicture(cameraSource.Photos)">
              <ion-icon name="image-outline"></ion-icon>
            </ion-fab-button>
          </div>
        </div>
      </ion-col>
    </ion-row>

    <ion-row class="ion-justify-content-center">
      <ion-col size="11" size-md="7" size-lg="6" size-xl="4">
        <form [formGroup]="registerForm" style="direction: rtl" class="pl-3 pr-3 pt-3">
          <div class="d-flex flex-column w-75">
            <mat-form-field appearance="fill">
              <mat-label>שם פרטי</mat-label>
              <input matInput type="text" formControlName="firstName">
            </mat-form-field>
            <mat-form-field appearance="fill">
              <mat-label>שם משפחה</mat-label>
              <input matInput type="text" formControlName="lastName">
            </mat-form-field>
            <mat-form-field appearance="fill">
              <mat-label>מספר פלאפון</mat-label>
              <input matInput type="tel" formControlName="phoneNumber">
            </mat-form-field>
            <mat-form-field appearance="fill">
              <mat-label>תאריך לידה</mat-label>
              <input matInput [matDatepicker]="birthDatePicker" formControlName="birthDate">
              <mat-datepicker-toggle matSuffix [for]="birthDatePicker"></mat-datepicker-toggle>
              <mat-datepicker #birthDatePicker></mat-datepicker>
            </mat-form-field>
            <mat-form-field appearance="fill">
              <mat-label>אימייל</mat-label>
              <input matInput type="email" formControlName="email">
            </mat-form-field>
          </div>
        </form>
      </ion-col>
    </ion-row>
  </ion-grid>
</ion-content>
<ion-footer>
  <ion-toolbar>
    <div class="justify-content-center d-flex">
      <ion-button mode="ios" class="w-75" (click)="updateUser()" type="button" color="primary" expand="block" [disabled]="!registerForm.valid">
        שמור
      </ion-button>
    </div>
  </ion-toolbar>
</ion-footer>
